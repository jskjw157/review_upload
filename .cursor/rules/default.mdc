---
description: Core project guidelines for Cafe24 Local Review Manager development
globs: ["**/*"]
alwaysApply: true
---

# Cafe24 Local Review Manager - Development Guidelines

## ğŸ¯ Project Overview

**App Name:** Cafe24 Local Review Manager

**Purpose:** A local desktop application that provides **automated review upload and management** functionality for Cafe24 shopping malls.

**Tech Stack:**
| Component | Technology |
|-----------|------------|
| Desktop Framework | Electron |
| Language | TypeScript (ES2020+) |
| Build Tool | Vite |
| Backend Logic | Node.js |
| HTTP Client | axios / fetch |
| Authentication | OAuth 2.0 |
| Platforms | macOS, Windows |

---

## ğŸ“ Development Phases

### Phase 1: Core Features (Current Focus)

Implement the basic functionality defined in `README.md`:

1. **OAuth Authentication**
   - Cafe24 OAuth 2.0 login flow
   - Access token acquisition and local storage
   - Token refresh on expiration

2. **Single Review Upload**
   - Product selection dropdown
   - Star rating input
   - Review text input
   - (Optional) Image attachment

3. **Bulk Upload**
   - CSV/Excel file selection
   - File parsing and validation
   - Batch API calls with progress tracking
   - Success/failure logging

4. **Upload History**
   - Display uploaded review records
   - Edit/delete options

### Phase 2: Advanced Features (Future Roadmap)

Clone and enhance features from **Cafe24 App Store review apps**:

- [ ] Review moderation dashboard
- [ ] AI-powered review sentiment analysis
- [ ] Automated review response templates
- [ ] Review analytics and reporting
- [ ] Multi-store management
- [ ] Review import from other platforms
- [ ] Scheduled review publishing
- [ ] Review incentive management (coupons/points)
- [ ] Photo/video review enhanced support
- [ ] Review SEO optimization tools

---

## ğŸ—ï¸ Architecture Guidelines

### Electron Process Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Main Process                         â”‚
â”‚  (src/main/)                                           â”‚
â”‚  â”œâ”€â”€ main.ts          â†’ App lifecycle, window mgmt     â”‚
â”‚  â”œâ”€â”€ preload.ts       â†’ Secure IPC bridge              â”‚
â”‚  â””â”€â”€ services/                                         â”‚
â”‚      â”œâ”€â”€ auth.ts      â†’ OAuth token management         â”‚
â”‚      â””â”€â”€ review.ts    â†’ Cafe24 API calls               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   Renderer Process                      â”‚
â”‚  (src/renderer/)                                       â”‚
â”‚  â”œâ”€â”€ main.ts          â†’ UI entry point                 â”‚
â”‚  â””â”€â”€ services/                                         â”‚
â”‚      â””â”€â”€ mockReviewService.ts â†’ Dev/test mocks         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Shared Types                         â”‚
â”‚  (src/types/)                                          â”‚
â”‚  â”œâ”€â”€ global.d.ts      â†’ Window API declarations        â”‚
â”‚  â”œâ”€â”€ ipc.ts           â†’ IPC channel/payload types      â”‚
â”‚  â””â”€â”€ review.ts        â†’ Review data types              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Key Principles

1. **Security First**
   - Always use `contextIsolation: true`
   - Never expose `nodeIntegration` to renderer
   - Validate all IPC payloads

2. **Type Safety**
   - Define all IPC channels with TypeScript interfaces
   - Use strict null checks
   - Avoid `any` type

3. **Separation of Concerns**
   - Main process: System access, API calls, file I/O
   - Renderer process: UI rendering only
   - Preload: Minimal, secure bridge

---

## ğŸ“ Project Structure

```
review_upload/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/                 # Electron Main Process
â”‚   â”‚   â”œâ”€â”€ main.ts          # App entry point
â”‚   â”‚   â”œâ”€â”€ preload.ts       # Context bridge
â”‚   â”‚   â””â”€â”€ services/        # Business logic
â”‚   â”‚       â”œâ”€â”€ auth.ts      # OAuth handling
â”‚   â”‚       â””â”€â”€ review.ts    # Review API
â”‚   â”œâ”€â”€ renderer/            # Electron Renderer
â”‚   â”‚   â”œâ”€â”€ main.ts          # UI logic
â”‚   â”‚   â””â”€â”€ services/        # UI services
â”‚   â””â”€â”€ types/               # Shared TypeScript types
â”œâ”€â”€ index.html               # Renderer HTML
â”œâ”€â”€ styles.css               # Global styles
â”œâ”€â”€ vite.main.config.ts      # Vite config for main
â”œâ”€â”€ vite.renderer.config.ts  # Vite config for renderer
â””â”€â”€ README.md                # Project specification
```

---

## ğŸ”§ Development Workflow

### Running the App

```bash
# Development mode (hot reload)
npm run dev

# Production build
npm run build

# Run built app
npm run start
```

### Before Implementing Features

1. **Check README.md** for feature specifications
2. **Review existing code** for patterns and conventions
3. **Consider Cafe24 API constraints** (rate limits, auth requirements)
4. **Plan IPC communication** if Main-Renderer interaction needed

### Code Quality Checklist

- [ ] TypeScript strict mode compliance
- [ ] Error handling with meaningful messages
- [ ] IPC payloads properly typed
- [ ] Sensitive data (tokens) securely stored
- [ ] API rate limiting respected
- [ ] User feedback for async operations

---

## ğŸ¯ Implementation Priority

When implementing features, follow this priority order:

```
HIGH PRIORITY (Phase 1):
â”œâ”€â”€ 1. OAuth authentication flow
â”œâ”€â”€ 2. Single review submission
â”œâ”€â”€ 3. Bulk upload from CSV/Excel
â””â”€â”€ 4. Upload history display

MEDIUM PRIORITY (Phase 1 Enhancement):
â”œâ”€â”€ 5. Token auto-refresh
â”œâ”€â”€ 6. Error retry logic
â”œâ”€â”€ 7. Input validation
â””â”€â”€ 8. Progress indicators

FUTURE (Phase 2):
â”œâ”€â”€ 9. Clone Cafe24 store app features
â”œâ”€â”€ 10. Advanced analytics
â””â”€â”€ 11. Multi-store support
```

---

## ğŸ“š Key References

- **Project Spec:** `README.md`
- **Cafe24 API:** See `cafe24-api.mdc` rule
- **Electron Patterns:** See `electron.mdc` rule
- **IPC Guidelines:** See `ipc-patterns.mdc` rule

---

## âš ï¸ Common Pitfalls to Avoid

1. **Token Management**
   - Don't store tokens in renderer process
   - Always check token expiry before API calls
   - Handle refresh token rotation

2. **File Handling**
   - Use streams for large CSV/Excel files
   - Validate file format before parsing
   - Handle encoding issues (UTF-8, EUC-KR)

3. **API Calls**
   - Respect Cafe24 rate limits (5 req/sec)
   - Handle network errors gracefully
   - Implement exponential backoff for retries

4. **Electron Security**
   - Never use `eval()` or `Function()` in renderer
   - Sanitize all user inputs
   - Use secure IPC patterns only

---

## ğŸŒ Response Language

- Code comments: English
- User-facing messages: Korean (í•œêµ­ì–´)
- Documentation: Follow existing file language
